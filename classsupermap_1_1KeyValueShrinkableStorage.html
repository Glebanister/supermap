<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Supermap: supermap::KeyValueShrinkableStorage&lt; Key, Value, IndexT, IndexRegisterInfo &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Supermap
   </div>
   <div id="projectbrief">Key value storage</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>supermap</b></li><li class="navelem"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">KeyValueShrinkableStorage</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsupermap_1_1KeyValueShrinkableStorage-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">supermap::KeyValueShrinkableStorage&lt; Key, Value, IndexT, IndexRegisterInfo &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Storage, which contains keys and associated values. Consists of two parts: the one, where keys are sorted and unique and the one where there is no particular order.  
 <a href="classsupermap_1_1KeyValueShrinkableStorage.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="KeyValueShrinkableStorage_8hpp_source.html">KeyValueShrinkableStorage.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for supermap::KeyValueShrinkableStorage&lt; Key, Value, IndexT, IndexRegisterInfo &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classsupermap_1_1KeyValueShrinkableStorage__inherit__graph.png" border="0" usemap="#asupermap_1_1KeyValueShrinkableStorage_3_01Key_00_01Value_00_01IndexT_00_01IndexRegisterInfo_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="asupermap_1_1KeyValueShrinkableStorage_3_01Key_00_01Value_00_01IndexT_00_01IndexRegisterInfo_01_4_inherit__map" id="asupermap_1_1KeyValueShrinkableStorage_3_01Key_00_01Value_00_01IndexT_00_01IndexRegisterInfo_01_4_inherit__map">
<area shape="rect" title="Storage, which contains keys and associated values. Consists of two parts: the one,..." alt="" coords="477,13,679,69"/>
<area shape="rect" href="classsupermap_1_1IndexedStorage.html" title=" " alt="" coords="235,5,429,76"/>
<area shape="rect" href="classsupermap_1_1OrderedStorage.html" title="An abstract storage, where elements has particular order. Element added later is of lower order." alt="" coords="5,20,187,61"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for supermap::KeyValueShrinkableStorage&lt; Key, Value, IndexT, IndexRegisterInfo &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classsupermap_1_1KeyValueShrinkableStorage__coll__graph.png" border="0" usemap="#asupermap_1_1KeyValueShrinkableStorage_3_01Key_00_01Value_00_01IndexT_00_01IndexRegisterInfo_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="asupermap_1_1KeyValueShrinkableStorage_3_01Key_00_01Value_00_01IndexT_00_01IndexRegisterInfo_01_4_coll__map" id="asupermap_1_1KeyValueShrinkableStorage_3_01Key_00_01Value_00_01IndexT_00_01IndexRegisterInfo_01_4_coll__map">
<area shape="rect" title="Storage, which contains keys and associated values. Consists of two parts: the one,..." alt="" coords="477,13,679,69"/>
<area shape="rect" href="classsupermap_1_1IndexedStorage.html" title=" " alt="" coords="235,5,429,76"/>
<area shape="rect" href="classsupermap_1_1OrderedStorage.html" title="An abstract storage, where elements has particular order. Element added later is of lower order." alt="" coords="5,20,187,61"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4097fc9b3435583aec93e9f34b0ac21f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#a4097fc9b3435583aec93e9f34b0ac21f">KeyValueShrinkableStorage</a> (const std::string &amp;notSortedStorageFilename, const std::string &amp;sortedStorageFilename, std::shared_ptr&lt; <a class="el" href="classsupermap_1_1io_1_1FileManager.html">io::FileManager</a> &gt; fileManager)</td></tr>
<tr class="memdesc:a4097fc9b3435583aec93e9f34b0ac21f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an empty storage.  <a href="classsupermap_1_1KeyValueShrinkableStorage.html#a4097fc9b3435583aec93e9f34b0ac21f">More...</a><br /></td></tr>
<tr class="separator:a4097fc9b3435583aec93e9f34b0ac21f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b8629503007c59d77880a9d7b2c8247"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#a3b8629503007c59d77880a9d7b2c8247">KeyValueShrinkableStorage</a> (const <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">KeyValueShrinkableStorage</a> &amp;oldStorage, const <a class="el" href="classsupermap_1_1SortedSingleFileIndexedStorage.html">KeyIndexStorage</a> &amp;actualIndex, const std::string &amp;notSortedStorageFilename, const std::string &amp;sortedStorageFilename, std::size_t indexBatchSize)</td></tr>
<tr class="memdesc:a3b8629503007c59d77880a9d7b2c8247"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates new storage, copying values from <code>oldStorage</code>. Those value indexes will be taken from <code>actualIndex</code> in sorted order. New all new key-values will be sorted (if <code>actualIndex</code> is sorted), so all key-values will be in sorted storage. Not sorted storage will be empty.  <a href="classsupermap_1_1KeyValueShrinkableStorage.html#a3b8629503007c59d77880a9d7b2c8247">More...</a><br /></td></tr>
<tr class="separator:a3b8629503007c59d77880a9d7b2c8247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cc091d19b56c5a493e6c5e1088e9bf5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#a5cc091d19b56c5a493e6c5e1088e9bf5">resetWith</a> (<a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">KeyValueShrinkableStorage</a> &amp;&amp;other)</td></tr>
<tr class="memdesc:a5cc091d19b56c5a493e6c5e1088e9bf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replaces <code>this</code> storage with <code>other</code>. <code>other</code> will be <code>moved-from</code>.  <a href="classsupermap_1_1KeyValueShrinkableStorage.html#a5cc091d19b56c5a493e6c5e1088e9bf5">More...</a><br /></td></tr>
<tr class="separator:a5cc091d19b56c5a493e6c5e1088e9bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0ce126007aef23c5d0635bc228c1611"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classsupermap_1_1io_1_1FileManager.html">io::FileManager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#ad0ce126007aef23c5d0635bc228c1611">getFileManager</a> () const noexcept</td></tr>
<tr class="separator:ad0ce126007aef23c5d0635bc228c1611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a207166c175494d5061bb7a3a17a7ab8a"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classsupermap_1_1io_1_1TemporaryFile.html">io::TemporaryFile</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#a207166c175494d5061bb7a3a17a7ab8a">shareSortedStorageFile</a> () const noexcept</td></tr>
<tr class="separator:a207166c175494d5061bb7a3a17a7ab8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46a2521db01b2654b02e77c5dc702f96"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classsupermap_1_1io_1_1TemporaryFile.html">io::TemporaryFile</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#a46a2521db01b2654b02e77c5dc702f96">shareNotSortedStorageFile</a> () const noexcept</td></tr>
<tr class="separator:a46a2521db01b2654b02e77c5dc702f96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af10359fde26b9f2f135e0a6cc311297d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#af10359fde26b9f2f135e0a6cc311297d">append</a> (std::unique_ptr&lt; <a class="el" href="structsupermap_1_1KeyValue.html">KV</a> &gt; &amp;&amp;item) override</td></tr>
<tr class="memdesc:af10359fde26b9f2f135e0a6cc311297d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends <code>item</code> to the storage. It can not be easily appended to the sorted storage, hence, it is being appended to the not sorted storage. New value is considered to be the most relevant for key.  <a href="classsupermap_1_1KeyValueShrinkableStorage.html#af10359fde26b9f2f135e0a6cc311297d">More...</a><br /></td></tr>
<tr class="separator:af10359fde26b9f2f135e0a6cc311297d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b3c90cffa16f435948c040aadb99041"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsupermap_1_1KeyValue.html">KV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#a8b3c90cffa16f435948c040aadb99041">get</a> (IndexT index) const override</td></tr>
<tr class="memdesc:a8b3c90cffa16f435948c040aadb99041"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets key-value pair which has index <code>index</code> in this storage. Behavior is undefined if index overflows storage size.  <a href="classsupermap_1_1KeyValueShrinkableStorage.html#a8b3c90cffa16f435948c040aadb99041">More...</a><br /></td></tr>
<tr class="separator:a8b3c90cffa16f435948c040aadb99041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d0075508b874fa91bfbf125173cdda6"><td class="memItemLeft" align="right" valign="top">IndexT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#a7d0075508b874fa91bfbf125173cdda6">getItemsCount</a> () const noexcept override</td></tr>
<tr class="separator:a7d0075508b874fa91bfbf125173cdda6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada0ced9a80336f168dc1345d9d601410"><td class="memItemLeft" align="right" valign="top">IndexT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#ada0ced9a80336f168dc1345d9d601410">getSortedItemsCount</a> () const noexcept</td></tr>
<tr class="separator:ada0ced9a80336f168dc1345d9d601410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87238ba601ec4c690a128c2ca579f28c"><td class="memItemLeft" align="right" valign="top">IndexT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#a87238ba601ec4c690a128c2ca579f28c">getNotSortedItemsCount</a> () const noexcept</td></tr>
<tr class="separator:a87238ba601ec4c690a128c2ca579f28c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae521b67b8c1eef4e235a69d2e850323e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsupermap_1_1io_1_1InputIterator.html">io::InputIterator</a>&lt; <a class="el" href="structsupermap_1_1StorageValueIgnorer.html">ValueIgnorer</a>, IndexT &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#ae521b67b8c1eef4e235a69d2e850323e">getSortedKeys</a> ()</td></tr>
<tr class="separator:ae521b67b8c1eef4e235a69d2e850323e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef5a27a848fe0bd2f6db3bc5a8d2d9d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsupermap_1_1io_1_1InputIterator.html">io::InputIterator</a>&lt; <a class="el" href="structsupermap_1_1StorageValueIgnorer.html">ValueIgnorer</a>, IndexT &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#aef5a27a848fe0bd2f6db3bc5a8d2d9d1">getNotSortedKeys</a> ()</td></tr>
<tr class="separator:aef5a27a848fe0bd2f6db3bc5a8d2d9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c7b818381d78eb5b8221c0362253170"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsupermap_1_1io_1_1InputIterator.html">io::InputIterator</a>&lt; <a class="el" href="structsupermap_1_1KeyValue.html">KV</a>, IndexT &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#a8c7b818381d78eb5b8221c0362253170">getSortedEntries</a> ()</td></tr>
<tr class="separator:a8c7b818381d78eb5b8221c0362253170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a471ad8f29f469cb6f8c1fd970c24aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsupermap_1_1io_1_1InputIterator.html">io::InputIterator</a>&lt; <a class="el" href="structsupermap_1_1KeyValue.html">KV</a>, IndexT &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#a4a471ad8f29f469cb6f8c1fd970c24aa">getNotSortedEntries</a> ()</td></tr>
<tr class="separator:a4a471ad8f29f469cb6f8c1fd970c24aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bce7bfef1ef91c027246dbe127c61ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsupermap_1_1SortedSingleFileIndexedStorage.html">KeyIndexStorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html#a9bce7bfef1ef91c027246dbe127c61ef">shrink</a> (IndexT shrinkBatchSize, const std::string &amp;newIndexFileName)</td></tr>
<tr class="memdesc:a9bce7bfef1ef91c027246dbe127c61ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shrinks not sorted storage. After command completion not sorted storage is empty and there are the most relevant values are paired with keys in sorted storage.  <a href="classsupermap_1_1KeyValueShrinkableStorage.html#a9bce7bfef1ef91c027246dbe127c61ef">More...</a><br /></td></tr>
<tr class="separator:a9bce7bfef1ef91c027246dbe127c61ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsupermap_1_1OrderedStorage"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classsupermap_1_1OrderedStorage')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classsupermap_1_1OrderedStorage.html">supermap::OrderedStorage&lt; T, IndexT, RegisterType &gt;</a></td></tr>
<tr class="memitem:a3a7739d40bcd55b850ffecca73dc7102 inherit pub_methods_classsupermap_1_1OrderedStorage"><td class="memItemLeft" align="right" valign="top"><a id="a3a7739d40bcd55b850ffecca73dc7102"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1OrderedStorage.html#a3a7739d40bcd55b850ffecca73dc7102">append</a> (std::unique_ptr&lt; T &gt; &amp;&amp;)=0</td></tr>
<tr class="memdesc:a3a7739d40bcd55b850ffecca73dc7102 inherit pub_methods_classsupermap_1_1OrderedStorage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add element to the end of storage (which will have the greatest order). Order of added element is <code><a class="el" href="classsupermap_1_1OrderedStorage.html#a7467cb0a77057464037ad4fddf693a50">getLastElementIndex()</a></code>. <br /></td></tr>
<tr class="separator:a3a7739d40bcd55b850ffecca73dc7102 inherit pub_methods_classsupermap_1_1OrderedStorage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7741ad1a746cd6e8badb8a5b224f7c3 inherit pub_methods_classsupermap_1_1OrderedStorage"><td class="memItemLeft" align="right" valign="top"><a id="ab7741ad1a746cd6e8badb8a5b224f7c3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1OrderedStorage.html#ab7741ad1a746cd6e8badb8a5b224f7c3">appendCopy</a> (T elem)</td></tr>
<tr class="memdesc:ab7741ad1a746cd6e8badb8a5b224f7c3 inherit pub_methods_classsupermap_1_1OrderedStorage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add copy of an element to the end of storage (which will have the greatest order). Order of added element is <code><a class="el" href="classsupermap_1_1OrderedStorage.html#a7467cb0a77057464037ad4fddf693a50">getLastElementIndex()</a></code>. <br /></td></tr>
<tr class="separator:ab7741ad1a746cd6e8badb8a5b224f7c3 inherit pub_methods_classsupermap_1_1OrderedStorage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7467cb0a77057464037ad4fddf693a50 inherit pub_methods_classsupermap_1_1OrderedStorage"><td class="memItemLeft" align="right" valign="top">IndexT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1OrderedStorage.html#a7467cb0a77057464037ad4fddf693a50">getLastElementIndex</a> () const noexcept</td></tr>
<tr class="separator:a7467cb0a77057464037ad4fddf693a50 inherit pub_methods_classsupermap_1_1OrderedStorage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79c65797187c7cfdbe8b6e1fc41bb058 inherit pub_methods_classsupermap_1_1OrderedStorage"><td class="memItemLeft" align="right" valign="top">const auto &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1OrderedStorage.html#a79c65797187c7cfdbe8b6e1fc41bb058">getRegisterInfo</a> () noexcept</td></tr>
<tr class="separator:a79c65797187c7cfdbe8b6e1fc41bb058 inherit pub_methods_classsupermap_1_1OrderedStorage"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classsupermap_1_1OrderedStorage"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classsupermap_1_1OrderedStorage')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classsupermap_1_1OrderedStorage.html">supermap::OrderedStorage&lt; T, IndexT, RegisterType &gt;</a></td></tr>
<tr class="memitem:afb7c9992c6acb5c1c8f7e0309460456c inherit pro_methods_classsupermap_1_1OrderedStorage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsupermap_1_1CountingStorageItemRegister.html">CountingStorageItemRegister</a>&lt; T, IndexT, RegisterType &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsupermap_1_1OrderedStorage.html#afb7c9992c6acb5c1c8f7e0309460456c">getRegister</a> ()</td></tr>
<tr class="separator:afb7c9992c6acb5c1c8f7e0309460456c inherit pro_methods_classsupermap_1_1OrderedStorage"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Key, typename Value, typename IndexT, typename IndexRegisterInfo&gt;<br />
class supermap::KeyValueShrinkableStorage&lt; Key, Value, IndexT, IndexRegisterInfo &gt;</h3>

<p>Storage, which contains keys and associated values. Consists of two parts: the one, where keys are sorted and unique and the one where there is no particular order. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname"><a class="el" href="structsupermap_1_1Key.html" title="An array which contains Len bytes in-place (not in the heap memory).">Key</a></td><td>key type. </td></tr>
    <tr><td class="paramname">Value</td><td>value type. </td></tr>
    <tr><td class="paramname">IndexT</td><td>type of storage index. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4097fc9b3435583aec93e9f34b0ac21f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4097fc9b3435583aec93e9f34b0ac21f">&#9670;&nbsp;</a></span>KeyValueShrinkableStorage() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::<a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">KeyValueShrinkableStorage</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>notSortedStorageFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sortedStorageFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classsupermap_1_1io_1_1FileManager.html">io::FileManager</a> &gt;&#160;</td>
          <td class="paramname"><em>fileManager</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates an empty storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">notSortedStorageFilename</td><td>Name of file where not sorted key-values will be stored. </td></tr>
    <tr><td class="paramname">sortedStorageFilename</td><td>Name of file where shuffled key-values will be stored. </td></tr>
    <tr><td class="paramname">fileManager</td><td>Shared access to the file manager. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3b8629503007c59d77880a9d7b2c8247"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b8629503007c59d77880a9d7b2c8247">&#9670;&nbsp;</a></span>KeyValueShrinkableStorage() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::<a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">KeyValueShrinkableStorage</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt; &amp;&#160;</td>
          <td class="paramname"><em>oldStorage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classsupermap_1_1SortedSingleFileIndexedStorage.html">KeyIndexStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>actualIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>notSortedStorageFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sortedStorageFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>indexBatchSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates new storage, copying values from <code>oldStorage</code>. Those value indexes will be taken from <code>actualIndex</code> in sorted order. New all new key-values will be sorted (if <code>actualIndex</code> is sorted), so all key-values will be in sorted storage. Not sorted storage will be empty. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldStorage</td><td>Storage, from where all values will be taken from. </td></tr>
    <tr><td class="paramname">actualIndex</td><td>Indexes of actual values. </td></tr>
    <tr><td class="paramname">notSortedStorageFilename</td><td>New not sorted storage filename. </td></tr>
    <tr><td class="paramname">sortedStorageFilename</td><td>New sorted storage filename. </td></tr>
    <tr><td class="paramname">indexBatchSize</td><td>The size of the batch of <code>KeyValue&lt;T,IndexT&gt;</code> objects that are simultaneously stored in RAM. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af10359fde26b9f2f135e0a6cc311297d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af10359fde26b9f2f135e0a6cc311297d">&#9670;&nbsp;</a></span>append()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::append </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="structsupermap_1_1KeyValue.html">KV</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Appends <code>item</code> to the storage. It can not be easily appended to the sorted storage, hence, it is being appended to the not sorted storage. New value is considered to be the most relevant for key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>Object to append. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8b3c90cffa16f435948c040aadb99041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b3c90cffa16f435948c040aadb99041">&#9670;&nbsp;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsupermap_1_1KeyValue.html">KV</a> <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::get </td>
          <td>(</td>
          <td class="paramtype">IndexT&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets key-value pair which has index <code>index</code> in this storage. Behavior is undefined if index overflows storage size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of key-value pair to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Read key-value pair. </dd></dl>

<p>Implements <a class="el" href="classsupermap_1_1IndexedStorage.html#a80a364e2e09a1e503931a3b797873dfd">supermap::IndexedStorage&lt; KeyValue&lt; Key, Value &gt;, IndexT, VoidRegister&lt; KeyValue&lt; Key, Value &gt; &gt; &gt;</a>.</p>

</div>
</div>
<a id="ad0ce126007aef23c5d0635bc228c1611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0ce126007aef23c5d0635bc228c1611">&#9670;&nbsp;</a></span>getFileManager()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classsupermap_1_1io_1_1FileManager.html">io::FileManager</a>&gt; <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::getFileManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Shared with this storage file manager access. </dd></dl>

</div>
</div>
<a id="a7d0075508b874fa91bfbf125173cdda6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d0075508b874fa91bfbf125173cdda6">&#9670;&nbsp;</a></span>getItemsCount()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IndexT <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::getItemsCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Number of key-value pairs in storage (sum of sorted and not sorted storage sizes). </dd></dl>

<p>Reimplemented from <a class="el" href="classsupermap_1_1OrderedStorage.html#a876c3fcdaa0e07e5f07faf5e425014d4">supermap::OrderedStorage&lt; T, IndexT, RegisterType &gt;</a>.</p>

</div>
</div>
<a id="a4a471ad8f29f469cb6f8c1fd970c24aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a471ad8f29f469cb6f8c1fd970c24aa">&#9670;&nbsp;</a></span>getNotSortedEntries()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsupermap_1_1io_1_1InputIterator.html">io::InputIterator</a>&lt;<a class="el" href="structsupermap_1_1KeyValue.html">KV</a>, IndexT&gt; <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::getNotSortedEntries </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Not sorted entries input iterator. </dd></dl>

</div>
</div>
<a id="a87238ba601ec4c690a128c2ca579f28c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87238ba601ec4c690a128c2ca579f28c">&#9670;&nbsp;</a></span>getNotSortedItemsCount()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IndexT <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::getNotSortedItemsCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Number of key-value pairs in not sorted storage. </dd></dl>

</div>
</div>
<a id="aef5a27a848fe0bd2f6db3bc5a8d2d9d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef5a27a848fe0bd2f6db3bc5a8d2d9d1">&#9670;&nbsp;</a></span>getNotSortedKeys()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsupermap_1_1io_1_1InputIterator.html">io::InputIterator</a>&lt;<a class="el" href="structsupermap_1_1StorageValueIgnorer.html">ValueIgnorer</a>, IndexT&gt; <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::getNotSortedKeys </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Not sorted keys input iterator. </dd></dl>

</div>
</div>
<a id="a8c7b818381d78eb5b8221c0362253170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c7b818381d78eb5b8221c0362253170">&#9670;&nbsp;</a></span>getSortedEntries()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsupermap_1_1io_1_1InputIterator.html">io::InputIterator</a>&lt;<a class="el" href="structsupermap_1_1KeyValue.html">KV</a>, IndexT&gt; <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::getSortedEntries </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Sorted entries input iterator. </dd></dl>

</div>
</div>
<a id="ada0ced9a80336f168dc1345d9d601410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada0ced9a80336f168dc1345d9d601410">&#9670;&nbsp;</a></span>getSortedItemsCount()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IndexT <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::getSortedItemsCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Number of key-value pairs in sorted storage. </dd></dl>

</div>
</div>
<a id="ae521b67b8c1eef4e235a69d2e850323e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae521b67b8c1eef4e235a69d2e850323e">&#9670;&nbsp;</a></span>getSortedKeys()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsupermap_1_1io_1_1InputIterator.html">io::InputIterator</a>&lt;<a class="el" href="structsupermap_1_1StorageValueIgnorer.html">ValueIgnorer</a>, IndexT&gt; <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::getSortedKeys </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Sorted keys input iterator. </dd></dl>

</div>
</div>
<a id="a5cc091d19b56c5a493e6c5e1088e9bf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cc091d19b56c5a493e6c5e1088e9bf5">&#9670;&nbsp;</a></span>resetWith()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::resetWith </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replaces <code>this</code> storage with <code>other</code>. <code>other</code> will be <code>moved-from</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">other</td><td>Replacement. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a46a2521db01b2654b02e77c5dc702f96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46a2521db01b2654b02e77c5dc702f96">&#9670;&nbsp;</a></span>shareNotSortedStorageFile()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classsupermap_1_1io_1_1TemporaryFile.html">io::TemporaryFile</a>&gt; <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::shareNotSortedStorageFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>File accosted with not sorted storage. </dd></dl>

</div>
</div>
<a id="a207166c175494d5061bb7a3a17a7ab8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a207166c175494d5061bb7a3a17a7ab8a">&#9670;&nbsp;</a></span>shareSortedStorageFile()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classsupermap_1_1io_1_1TemporaryFile.html">io::TemporaryFile</a>&gt; <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::shareSortedStorageFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>File accosted with sorted storage. </dd></dl>

</div>
</div>
<a id="a9bce7bfef1ef91c027246dbe127c61ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bce7bfef1ef91c027246dbe127c61ef">&#9670;&nbsp;</a></span>shrink()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value , typename IndexT , typename IndexRegisterInfo &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsupermap_1_1SortedSingleFileIndexedStorage.html">KeyIndexStorage</a> <a class="el" href="classsupermap_1_1KeyValueShrinkableStorage.html">supermap::KeyValueShrinkableStorage</a>&lt; <a class="el" href="structsupermap_1_1Key.html">Key</a>, Value, IndexT, IndexRegisterInfo &gt;::shrink </td>
          <td>(</td>
          <td class="paramtype">IndexT&#160;</td>
          <td class="paramname"><em>shrinkBatchSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>newIndexFileName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shrinks not sorted storage. After command completion not sorted storage is empty and there are the most relevant values are paired with keys in sorted storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shrinkBatchSize</td><td>The size of the batch of <code>KeyValue&lt;T,IndexT&gt;</code> objects that are simultaneously stored in RAM. </td></tr>
    <tr><td class="paramname">newIndexFileName</td><td>File, where new index with the most relevant key value positions will be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Sorted storage of <code>KeyValue&lt;Key,IndexT&gt;</code> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/core/<a class="el" href="KeyValueShrinkableStorage_8hpp_source.html">KeyValueShrinkableStorage.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
